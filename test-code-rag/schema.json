{
  "nodes": [
    {
      "label": "Scope",
      "properties": [
        {
          "name": "parentUUID",
          "type": "String",
          "nullable": true
        },
        {
          "name": "returnType",
          "type": "String",
          "nullable": true
        },
        {
          "name": "embeddingsDirty",
          "type": "Boolean",
          "nullable": true
        },
        {
          "name": "hash",
          "type": "String",
          "nullable": true
        },
        {
          "name": "parent",
          "type": "String",
          "nullable": true
        },
        {
          "name": "linesOfCode",
          "type": "Integer",
          "nullable": true
        },
        {
          "name": "depth",
          "type": "Integer",
          "nullable": true
        },
        {
          "name": "startLine",
          "type": "Integer",
          "nullable": true
        },
        {
          "name": "language",
          "type": "String",
          "nullable": true
        },
        {
          "name": "complexity",
          "type": "Integer",
          "nullable": true
        },
        {
          "name": "signature",
          "type": "String",
          "nullable": true
        },
        {
          "name": "source",
          "type": "String",
          "nullable": true
        },
        {
          "name": "type",
          "type": "String",
          "nullable": true
        },
        {
          "name": "endLine",
          "type": "Integer",
          "nullable": true
        },
        {
          "name": "uuid",
          "type": "String",
          "nullable": true
        },
        {
          "name": "name",
          "type": "String",
          "nullable": true
        },
        {
          "name": "file",
          "type": "String",
          "nullable": true
        },
        {
          "name": "parameters",
          "type": "String",
          "nullable": true
        },
        {
          "name": "genericParameters",
          "type": "String",
          "nullable": true
        },
        {
          "name": "generics",
          "type": "String",
          "nullable": true
        }
      ],
      "count": 644
    },
    {
      "label": "File",
      "properties": [
        {
          "name": "name",
          "type": "String",
          "nullable": true
        },
        {
          "name": "uuid",
          "type": "String",
          "nullable": true
        },
        {
          "name": "contentHash",
          "type": "String",
          "nullable": true
        },
        {
          "name": "path",
          "type": "String",
          "nullable": true
        },
        {
          "name": "extension",
          "type": "String",
          "nullable": true
        },
        {
          "name": "directory",
          "type": "String",
          "nullable": true
        }
      ],
      "count": 57
    },
    {
      "label": "Directory",
      "properties": [],
      "count": 0
    },
    {
      "label": "ExternalLibrary",
      "properties": [],
      "count": 0
    },
    {
      "label": "Project",
      "properties": [],
      "count": 0
    },
    {
      "label": "Change",
      "properties": [
        {
          "name": "linesRemoved",
          "type": "Integer",
          "nullable": true
        },
        {
          "name": "linesAdded",
          "type": "Integer",
          "nullable": true
        },
        {
          "name": "uuid",
          "type": "String",
          "nullable": true
        },
        {
          "name": "timestamp",
          "type": "DateTime",
          "nullable": true
        },
        {
          "name": "changeType",
          "type": "String",
          "nullable": true
        },
        {
          "name": "newHash",
          "type": "String",
          "nullable": true
        },
        {
          "name": "metadataJson",
          "type": "String",
          "nullable": true
        },
        {
          "name": "entityType",
          "type": "String",
          "nullable": true
        },
        {
          "name": "diff",
          "type": "String",
          "nullable": true
        }
      ],
      "count": 644
    }
  ],
  "relationships": [
    {
      "type": "DEFINED_IN",
      "startNode": "Scope",
      "endNode": "File",
      "properties": [],
      "count": 0
    },
    {
      "type": "HAS_PARENT",
      "startNode": "Scope",
      "endNode": "Scope",
      "properties": [],
      "count": 0
    },
    {
      "type": "CONSUMES",
      "startNode": "Scope",
      "endNode": "Scope",
      "properties": [],
      "count": 0
    },
    {
      "type": "INHERITS_FROM",
      "startNode": "Scope",
      "endNode": "Scope",
      "properties": [],
      "count": 0
    },
    {
      "type": "HAS_CHANGE",
      "startNode": "Scope",
      "endNode": "Change",
      "properties": [],
      "count": 0
    }
  ],
  "indexes": [
    {
      "name": "directory_path",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Directory"
      ],
      "properties": [
        "path"
      ]
    },
    {
      "name": "external_library_name",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "ExternalLibrary"
      ],
      "properties": [
        "name"
      ]
    },
    {
      "name": "file_path",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "File"
      ],
      "properties": [
        "path"
      ]
    },
    {
      "name": "index_343aff4e",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": null,
      "properties": null
    },
    {
      "name": "index_f7700477",
      "type": "BTREE",
      "entityType": "RELATIONSHIP",
      "labelsOrTypes": null,
      "properties": null
    },
    {
      "name": "project_name",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Project"
      ],
      "properties": [
        "name"
      ]
    },
    {
      "name": "scopeSourceEmbeddings",
      "type": "VECTOR",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Scope"
      ],
      "properties": [
        "source_embedding"
      ]
    },
    {
      "name": "scope_file",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Scope"
      ],
      "properties": [
        "file"
      ]
    },
    {
      "name": "scope_name",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Scope"
      ],
      "properties": [
        "name"
      ]
    },
    {
      "name": "scope_type",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Scope"
      ],
      "properties": [
        "type"
      ]
    },
    {
      "name": "scope_uuid",
      "type": "BTREE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Scope"
      ],
      "properties": [
        "uuid"
      ]
    }
  ],
  "constraints": [
    {
      "name": "directory_path",
      "type": "UNIQUE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Directory"
      ],
      "properties": [
        "path"
      ]
    },
    {
      "name": "external_library_name",
      "type": "UNIQUE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "ExternalLibrary"
      ],
      "properties": [
        "name"
      ]
    },
    {
      "name": "file_path",
      "type": "UNIQUE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "File"
      ],
      "properties": [
        "path"
      ]
    },
    {
      "name": "project_name",
      "type": "UNIQUE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Project"
      ],
      "properties": [
        "name"
      ]
    },
    {
      "name": "scope_uuid",
      "type": "UNIQUE",
      "entityType": "NODE",
      "labelsOrTypes": [
        "Scope"
      ],
      "properties": [
        "uuid"
      ]
    }
  ],
  "vectorIndexes": [
    {
      "name": "scopeSourceEmbeddings",
      "label": "Scope",
      "property": "source_embedding"
    }
  ],
  "relationshipExamples": {
    "DEFINED_IN": "index.ts",
    "HAS_PARENT": "ChangeTracker",
    "CONSUMES": "answer",
    "INHERITS_FROM": "SourceConfig",
    "HAS_CHANGE": "6abd1bcb122278e1"
  },
  "fieldExamples": {
    "Scope.name": [
      "AddRelationshipConfig",
      "AgentConfig",
      "AgentResult",
      "AggregateResult",
      "CODE_ANALYSIS_STRATEGY",
      "CachedSummary",
      "Change",
      "ChangeTracker",
      "ChangeTrackingConfig",
      "ChangeTrackingConfigSchema"
    ],
    "Scope.source": [
      "public static GenerateUUID(): string {\n    const lut = this.Lut;\n\n    // Generate four random 32-bit numbers\n    const d0 = (Math.random() * 0xffffffff) | 0;\n    const d1 = (Math.random() * 0xffffffff) | 0;\n    const d2 = (Math.random() * 0xffffffff) | 0;\n    const d3 = (Math.random() * 0xffffffff) | 0;\n\n    // Build UUID string from bytes\n    const uuid =\n      lut[d0 & 0xff] +\n      lut[(d0 >> 8) & 0xff] +\n      lut[(d0 >> 16) & 0xff] +\n      lut[(d0 >> 24) & 0xff] +\n      '-' +\n      lut[d1 & 0xff] +\n      lut[(d1 >> 8) & 0xff] +\n      '-' +\n      lut[((d1 >> 16) & 0x0f) | 0x40] +\n      lut[(d1 >> 24) & 0xff] +\n      '-' +\n      lut[(d2 & 0x3f) | 0x80] +\n      lut[(d2 >> 8) & 0xff] +\n      '-' +\n      lut[(d2 >> 16) & 0xff] +\n      lut[(d2 >> 24) & 0xff] +\n      lut[d3 & 0xff] +\n      lut[(d3 >> 8) & 0xff] +\n      lut[(d3 >> 16) & 0xff] +\n      lut[(d3 >> 24) & 0xff];\n\n    return uuid.toUpperCase();\n  }",
      "public static GetUUID(obj: any): string {\n    if (obj.uuid === undefined) {\n      let uuid = this.GenerateUUID();\n      while (this._ObjById[uuid] !== undefined) {\n        uuid = this.GenerateUUID();\n      }\n      obj.uuid = uuid;\n      this._ObjById[uuid] = obj;\n    }\n    return obj.uuid;\n  }",
      "public static GetObjectById(uuid: string): any {\n    return this._ObjById[uuid];\n  }",
      "public static Clear(): void {\n    this._ObjById = {};\n  }",
      "function getLocalTimestamp(): string {\n  const now = new Date();\n  const year = now.getFullYear();\n  const month = String(now.getMonth() + 1).padStart(2, '0');\n  const day = String(now.getDate()).padStart(2, '0');\n  const hours = String(now.getHours()).padStart(2, '0');\n  const minutes = String(now.getMinutes()).padStart(2, '0');\n  const seconds = String(now.getSeconds()).padStart(2, '0');\n  const ms = String(now.getMilliseconds()).padStart(3, '0');\n\n  const offset = -now.getTimezoneOffset();\n  const offsetHours = String(Math.floor(Math.abs(offset) / 60)).padStart(2, '0');\n  const offsetMinutes = String(Math.abs(offset) % 60).padStart(2, '0');\n  const offsetSign = offset >= 0 ? '+' : '-';\n\n  return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}.${ms}${offsetSign}${offsetHours}:${offsetMinutes}`;\n}",
      "function getFilenameTimestamp(): string {\n  return getLocalTimestamp().replace(/[:.]/g, '-');\n}",
      "function formatLocalDate(date: Date = new Date()): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  const hours = String(date.getHours()).padStart(2, '0');\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  const seconds = String(date.getSeconds()).padStart(2, '0');\n  const ms = String(date.getMilliseconds()).padStart(3, '0');\n\n  const offset = -date.getTimezoneOffset();\n  const offsetHours = String(Math.floor(Math.abs(offset) / 60)).padStart(2, '0');\n  const offsetMinutes = String(Math.abs(offset) % 60).padStart(2, '0');\n  const offsetSign = offset >= 0 ? '+' : '-';\n\n  return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}.${ms}${offsetSign}${offsetHours}:${offsetMinutes}`;\n}",
      "interface RuntimeConfig {\n  neo4j: Neo4jConfig;\n  embeddings?: EmbeddingsConfig;\n  reranking?: RerankingConfig;\n}",
      "interface Neo4jConfig {\n  uri: string;\n  username: string;\n  password: string;\n  database?: string;\n  maxConnectionPoolSize?: number;\n  connectionTimeout?: number;\n}",
      "interface EmbeddingsConfig {\n  provider: 'openai' | 'vertex' | 'custom';\n  apiKey?: string;\n  endpoint?: string;\n  model?: string;\n  dimension?: number;\n}"
    ],
    "Scope.signature": [
      "accessibility_modifier static method GenerateUUID(): string",
      "accessibility_modifier static method GetUUID(obj: any): string",
      "accessibility_modifier static method GetObjectById(uuid: string): any",
      "accessibility_modifier static method Clear(): void",
      "function getLocalTimestamp(): string",
      "function getFilenameTimestamp(): string",
      "function formatLocalDate(date: Date): string",
      "interface RuntimeConfig()",
      "interface Neo4jConfig()",
      "interface EmbeddingsConfig()"
    ],
    "Scope.type": [
      "class",
      "function",
      "interface",
      "method",
      "type_alias",
      "variable"
    ],
    "File.name": [
      "index.ts",
      "change-tracker.ts",
      "code-source-adapter.ts",
      "file-watcher.ts",
      "incremental-ingestion.ts",
      "ingestion-queue.ts",
      "types.ts",
      "iterative-code-agent.ts",
      "neo4j-client.ts",
      "gemini-provider.ts"
    ]
  },
  "workingExamples": {
    "Scope.entitiesWithRelationships": [
      {
        "name": "needsSummary",
        "uuid": "FF3C2DA0-E4C6-4CBB-9958-A61708A4EFA8",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_CHANGE"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "CONSUMES"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "DEFINED_IN"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_PARENT"
          }
        ]
      },
      {
        "name": "summarizeField",
        "uuid": "DB736851-4E59-4C5E-AC93-04D986D94144",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_CHANGE"
          },
          {
            "count": {
              "low": 3,
              "high": 0
            },
            "type": "CONSUMES"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "DEFINED_IN"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_PARENT"
          }
        ]
      },
      {
        "name": "GenerateUUID",
        "uuid": "83D9352B-5DFD-4E33-B0CA-8F406EE47A44",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_CHANGE"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "CONSUMES"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "DEFINED_IN"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_PARENT"
          }
        ]
      },
      {
        "name": "GetUUID",
        "uuid": "56D59DAF-A2D5-4E3A-A1EE-1EC444B86FDC",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_CHANGE"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "CONSUMES"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "DEFINED_IN"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_PARENT"
          }
        ]
      },
      {
        "name": "summarizeBatch",
        "uuid": "95B78057-5C6B-4ABD-BA3D-D81766E06B99",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_CHANGE"
          },
          {
            "count": {
              "low": 2,
              "high": 0
            },
            "type": "CONSUMES"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "DEFINED_IN"
          },
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": "HAS_PARENT"
          }
        ]
      }
    ],
    "Scope.relationshipExamplesWithTargets": [
      {
        "relType": "HAS_CHANGE",
        "sourceName": "constructor",
        "targetName": null,
        "targetLabel": "Change",
        "count": 20
      },
      {
        "relType": "HAS_CHANGE",
        "sourceName": "validate",
        "targetName": null,
        "targetLabel": "Change",
        "count": 3
      },
      {
        "relType": "HAS_CHANGE",
        "sourceName": "generate",
        "targetName": null,
        "targetLabel": "Change",
        "count": 3
      },
      {
        "relType": "HAS_CHANGE",
        "sourceName": "parse",
        "targetName": null,
        "targetLabel": "Change",
        "count": 3
      },
      {
        "relType": "HAS_CHANGE",
        "sourceName": "close",
        "targetName": null,
        "targetLabel": "Change",
        "count": 3
      },
      {
        "relType": "DEFINED_IN",
        "sourceName": "RelationshipConfig",
        "targetName": "config.ts",
        "targetLabel": "File",
        "count": 2
      },
      {
        "relType": "HAS_CHANGE",
        "sourceName": "RelationshipConfig",
        "targetName": null,
        "targetLabel": "Change",
        "count": 2
      },
      {
        "relType": "HAS_CHANGE",
        "sourceName": "VectorSearchResult",
        "targetName": null,
        "targetLabel": "Change",
        "count": 2
      },
      {
        "relType": "DEFINED_IN",
        "sourceName": "EmbeddingsConfig",
        "targetName": "config.ts",
        "targetLabel": "File",
        "count": 2
      },
      {
        "relType": "HAS_CHANGE",
        "sourceName": "RerankingConfig",
        "targetName": null,
        "targetLabel": "Change",
        "count": 2
      }
    ],
    "File.entitiesWithRelationships": [
      {
        "name": "change-tracker.ts",
        "uuid": "file:packages/runtime/src/adapters/change-tracker.ts",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      },
      {
        "name": "code-source-adapter.ts",
        "uuid": "file:packages/runtime/src/adapters/code-source-adapter.ts",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      },
      {
        "name": "file-watcher.ts",
        "uuid": "file:packages/runtime/src/adapters/file-watcher.ts",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      },
      {
        "name": "incremental-ingestion.ts",
        "uuid": "file:packages/runtime/src/adapters/incremental-ingestion.ts",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      },
      {
        "name": "index.ts",
        "uuid": "file:packages/runtime/src/index.ts",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      }
    ],
    "Change.entitiesWithRelationships": [
      {
        "name": null,
        "uuid": "5057159e52576a6f",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      },
      {
        "name": null,
        "uuid": "91a40fab161112ac",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      },
      {
        "name": null,
        "uuid": "6b000ba942d79972",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      },
      {
        "name": null,
        "uuid": "2d8898cc19cb3299",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      },
      {
        "name": null,
        "uuid": "6abd1bcb122278e1",
        "relationships": [
          {
            "count": {
              "low": 1,
              "high": 0
            },
            "type": null
          }
        ]
      }
    ]
  }
}